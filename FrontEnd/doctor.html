<!doctype html>
<html>
  <head>
    <title>Doctor Dashboard</title>
    <script src="doctorService.js" defer></script>
  </head>
  <body>
    <h2>Doctor Dashboard</h2>
    <p id="data"></p>
    
    <button onclick="viewProfile()">View my Profile</button>
    <div id="doctorsProfile" style="display: none">
      <h3>Your Profile</h3>
      <table border="1">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Specialization</th>
          </tr>
        </thead>
        <tbody id="doctorBody"></tbody>
      </table>

      <!-- <script src="adminService.js"></script> -->
    </div>

    <button onclick="showAddPrescriptionForm()">Add Prescription</button>
    <div id="addPrescriptionForm" style="display: none; margin-top: 20px;">
      <h3>Add Prescription</h3>
      <form id="prescriptionForm">
        <label>Patient Name:</label>
        <input type="text" id="patientName" required><br><br>

        <label>Diagnosis:</label>
        <input type="text" id="diagnosis" required><br><br>

        <label>Medicine ID:</label>
        <input type="number" id="medicineId" required><br><br>

        <label>Quantity:</label>
        <input type="number" id="quantity" required><br><br>

        <button type="submit">Submit</button>
      </form>
      <p id="formResult"></p>
    </div>

    <button onclick="logout()">Logout</button>

    <script>
      const token = localStorage.getItem("jwt");
      if (!token) {
        window.location.href = "login.html";
      }

      fetch("http://localhost:8080/doctor/dashboard", {
        headers: {
          Authorization: "Bearer " + token,
        },
      })
        .then((res) => {
          if (!res.ok) {
            window.location.href = "login.html";
          }
          return res.text();
        })
        .then((data) => {
          document.getElementById("data").innerText = data;
        });

      function logout() {
        localStorage.removeItem("jwt");
        window.location.href = "login.html";
      }
    </script>
  </body>
</html>